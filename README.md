
# Islamic Institute Management System (IIMS)

نظام إدارة المعهد الإسلامي - معهد عثمان بن عفان المتوسط للدراسات الإسلامية

## 🎯 نظرة عامة

نظام شامل لإدارة المعهد الإسلامي يتضمن إدارة الطلاب والمعلمين والفصول الدراسية والمواد والدرجات والحضور والإعلانات والمزيد.

## 🚀 الميزات الرئيسية

### 📚 إدارة الطلاب
- إضافة طلاب جدد
- عرض قائمة الطلاب مع البحث والتصفية
- عرض تفاصيل الطالب
- تعديل بيانات الطالب
- حذف الطالب
- إدارة درجات الطلاب
- عرض نتائج الطلاب

### 👨‍🏫 إدارة المعلمين
- إضافة معلمين جدد مع نموذج متعدد الخطوات
- عرض قائمة المعلمين مع البحث والتصفية
- عرض تفاصيل المعلم
- تعديل بيانات المعلم
- حذف المعلم
- اختيار المواد الدراسية والمراحل الدراسية

### 📖 إدارة المواد الدراسية
- إدارة المواد الدراسية لكل سنة دراسية
- ربط المواد بالمعلمين
- عرض المواد مع التفاصيل

### 🏫 إدارة المراحل الدراسية
- إدارة المراحل الدراسية المختلفة
- ربط المراحل بالمعلمين
- عرض المراحل مع التفاصيل

### 📊 إدارة الدرجات
- إضافة درجات للطلاب
- عرض النتائج
- تصدير النتائج بصيغة PDF
- مراجعة طلبات تعديل الدرجات

### 📅 إدارة الحضور
- تسجيل الحضور اليومي
- عرض سجلات الحضور
- إدارة الحضور للفصول

### 📢 إدارة الإعلانات
- إضافة إعلانات جديدة
- عرض الإعلانات
- إدارة الإعلانات

## 🛠️ التقنيات المستخدمة

- **Frontend**: Next.js 14, React, TypeScript
- **UI Components**: Shadcn UI, Tailwind CSS
- **Database**: PostgreSQL مع Prisma ORM
- **Authentication**: Clerk
- **Icons**: Lucide React
- **Package Manager**: pnpm

## 📁 هيكل المشروع

```
src/
├── app/
│   ├── (dashboard)/
│   │   ├── admin/           # لوحة تحكم المدير
│   │   ├── grades/          # إدارة الدرجات
│   │   ├── list/            # قوائم البيانات
│   │   │   ├── students/    # قائمة الطلاب
│   │   │   ├── teachers/    # قائمة المعلمين
│   │   │   ├── classes/     # قائمة الفصول
│   │   │   └── ...
│   │   └── ...
│   ├── api/                 # API endpoints
│   └── ...
├── components/              # المكونات القابلة لإعادة الاستخدام
├── lib/                    # المكتبات والوظائف المساعدة
└── types/                  # تعريفات TypeScript
```

## 🎨 تصميم النظام

### الألوان الرئيسية
- **lamaPurple**: اللون الأساسي للنظام
- **lamaSky**: اللون الثانوي
- **lamaYellow**: لون التمييز
- **lamaPurpleLight**: نسخة فاتحة من اللون الأساسي

### التصميم
- تصميم متجاوب يعمل على جميع الأجهزة
- واجهة مستخدم عربية مع دعم RTL
- تصميم حديث وجذاب باستخدام Tailwind CSS
- مكونات UI احترافية من Shadcn UI

## 📋 صفحات إدارة المعلمين

### 1. صفحة إضافة المعلم الجديد (`/list/teachers/add`)
**الميزات:**
- نموذج متعدد الخطوات (3 خطوات)
- **الخطوة الأولى**: البيانات الأساسية والشخصية وجهة اتصال الطوارئ
- **الخطوة الثانية**: البيانات الوظيفية والمؤهلات العلمية
- **الخطوة الثالثة**: اختيار المواد الدراسية والمراحل الدراسية
- تصميم احترافي مع ألوان النظام
- تحقق من صحة البيانات
- ربط مع قاعدة البيانات

**البيانات المدعومة:**
- معلومات شخصية: الاسم، رقم الهوية، تاريخ الميلاد، الجنسية، الحالة الاجتماعية
- معلومات الاتصال: أرقام الهواتف، العنوان
- جهة اتصال الطوارئ: الاسم، صلة القرابة
- معلومات وظيفية: الحالة الوظيفية، تواريخ التعيين والعمل ونهاية العقد
- مؤهلات علمية: المؤهل، المؤسسة، التخصصات، سنة التخرج
- المواد الدراسية: اختيار متعدد من جدول المواد
- المراحل الدراسية: اختيار متعدد من جدول المراحل

### 2. صفحة عرض قائمة المعلمين (`/list/teachers`)
**الميزات:**
- عرض جميع المعلمين في جدول منظم
- البحث بالاسم أو رقم الهوية
- تصفية حسب الحالة الوظيفية والحالة الاجتماعية
- عرض المواد الدراسية والمراحل الدراسية لكل معلم
- أزرار الإجراءات: عرض، تعديل، حذف
- ترقيم الصفحات
- تصميم متجاوب

**الأعمدة:**
- الاسم الكامل
- رقم الهوية
- الحالة الوظيفية (مع ألوان مميزة)
- المواد الدراسية (badges)
- المراحل الدراسية (badges)
- رقم الهاتف
- الإجراءات

### 3. صفحة عرض تفاصيل المعلم (`/list/teachers/[id]`)
**الميزات:**
- عرض كامل بيانات المعلم
- تنظيم المعلومات في أقسام منفصلة
- عرض المواد الدراسية والمراحل الدراسية
- إحصائيات سريعة
- زر العودة لصفحة القائمة
- زر التعديل
- تصميم منظم مع sidebar

**الأقسام:**
- المعلومات الأساسية
- معلومات الاتصال
- جهة الاتصال للطوارئ
- المعلومات الوظيفية
- المؤهلات العلمية
- المواد الدراسية (sidebar)
- المراحل الدراسية (sidebar)
- الإحصائيات السريعة

### 4. صفحة تعديل بيانات المعلم (`/list/teachers/[id]/edit`)
**الميزات:**
- نموذج تعديل شامل
- تحميل البيانات الحالية تلقائياً
- تحديث جميع المعلومات
- تحديث المواد الدراسية والمراحل الدراسية
- تحقق من صحة البيانات
- رسائل النجاح والخطأ
- إعادة التوجيه بعد التحديث

## 🔌 API Endpoints

### المعلمين
- `GET /api/teachers` - جلب جميع المعلمين
- `POST /api/teachers` - إضافة معلم جديد
- `GET /api/teachers/[id]` - جلب معلم واحد
- `PUT /api/teachers/[id]` - تحديث بيانات معلم
- `DELETE /api/teachers/[id]` - حذف معلم

### المواد الدراسية
- `GET /api/subjects` - جلب جميع المواد

### المراحل الدراسية
- `GET /api/study-levels` - جلب جميع المراحل

## 🗄️ قاعدة البيانات

### النماذج الرئيسية
- **Teacher**: بيانات المعلم الأساسية
- **Subject**: المواد الدراسية
- **StudyLevel**: المراحل الدراسية
- **TeacherSubject**: ربط المعلمين بالمواد (علاقة many-to-many)
- **TeacherStudyLevel**: ربط المعلمين بالمراحل (علاقة many-to-many)

### العلاقات
- معلم واحد يمكنه تدريس عدة مواد
- معلم واحد يمكنه تدريس عدة مراحل
- مادة واحدة يمكن تدريسها من عدة معلمين
- مرحلة واحدة يمكن تدريسها من عدة معلمين

## 🚀 كيفية التشغيل

### المتطلبات
- Node.js 18+
- PostgreSQL
- pnpm

### التثبيت
```bash
# تثبيت pnpm عالمياً
npm install -g pnpm

# تثبيت التبعيات
pnpm install

# إعداد قاعدة البيانات
npx prisma db push

# توليد Prisma Client
npx prisma generate

# تشغيل التطبيق
pnpm dev
```

### المتغيرات البيئية
أنشئ ملف `.env` يحتوي على:
```env
DATABASE_URL="postgresql://username:password@localhost:5432/database_name"
NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY=your_clerk_key
CLERK_SECRET_KEY=your_clerk_secret
```

## 📝 ملاحظات التطوير

### إضافة معلم جديد
1. انتقل إلى `/list/teachers/add`
2. املأ البيانات في الخطوات الثلاث
3. تأكد من اختيار المواد والمراحل الدراسية
4. اضغط "إضافة المعلم"

### تعديل معلم موجود
1. انتقل إلى قائمة المعلمين
2. اضغط على زر التعديل
3. عدل البيانات المطلوبة
4. اضغط "حفظ التغييرات"

### حذف معلم
1. انتقل إلى قائمة المعلمين
2. اضغط على زر الحذف
3. أكد عملية الحذف

## 🔧 استكشاف الأخطاء

### مشاكل قاعدة البيانات
- تأكد من تشغيل PostgreSQL
- تحقق من صحة DATABASE_URL
- قم بتشغيل `npx prisma db push` لتحديث قاعدة البيانات

### مشاكل Prisma Client
- قم بتشغيل `npx prisma generate` بعد تغيير السكيما
- تأكد من إيقاف التطبيق قبل توليد Prisma Client

### مشاكل التطبيق
- تحقق من console المتصفح للأخطاء
- تحقق من terminal للأخطاء
- تأكد من صحة المتغيرات البيئية

## 🤝 المساهمة

للمساهمة في تطوير النظام:
1. قم بعمل fork للمشروع
2. أنشئ branch جديد للميزة
3. قم بالتطوير والاختبار
4. أرسل pull request

## 📞 الدعم

لأي استفسارات أو مشاكل:
- تواصل مع فريق التطوير
- راجع الوثائق
- تحقق من issues في GitHub

---

**تم تطوير هذا النظام بواسطة فريق تطوير المعهد الإسلامي** 🏛️

